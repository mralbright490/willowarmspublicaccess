<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ wapa broadcasting ]</title>
    <meta name="description" content="Tune into Willow Arms Public Access, an offbeat internet TV channel featuring live streams, The Bonfire Podcast, DogPound, unique music videos ([vibe]rations), experimental shows like 'POV: mom & dad are fighting again', and lo-fi streams ([iinnermission]). Discover weird online broadcasts.">
    <link rel="icon" href="wapabroadcastlogo.ico" type="image/x-icon">
    <script src="https://w.soundcloud.com/player/api.js"></script>
    <style>
    /* Existing styles from your index.html... */
    body.theme-afterlounge {
        background-image: url('afterlounge.png');
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: center center;
        background-color: #0c0c1a;
    }
    body.theme-afterlounge section:not(#discord-chat-modal-content) { /* Exclude modal content from section styling */
        background-color: rgba(26, 26, 51, 0.85);
        color: #ffffff;
        border: 1px solid #008b8b;
    }
    body.theme-afterlounge section h2,
    body.theme-afterlounge section h3 {
        color: #00e6e6;
        border-bottom-color: #00a3a3;
    }
    body.theme-afterlounge .show {
        background-color: rgba(42, 42, 77, 0.9);
        border-left-color: #00e6e6;
    }
    body.theme-afterlounge .show h3 {
        color: #00e6e6;
    }
     body.theme-afterlounge .show p {
        color: #dddddd;
    }
    body.theme-afterlounge .iframe-container {
        background-color: rgba(26, 26, 51, 0.85);
        border-color: #008b8b;
    }
     body.theme-afterlounge .iframe-container p {
        color: #dddddd;
    }
     body.theme-afterlounge #livestream .video-container {
        border-color: #00e6e6;
        box-shadow: 0 0 10px rgba(0, 230, 230, 0.5);
     }
    body.theme-afterlounge .irc-chat-button { /* Will be reused for Discord Chat Button */
        background-color: #1a1a33;
        color: #00e6e6;
        border-color: #00a3a3;
    }
    body.theme-afterlounge .irc-chat-button:hover {
        background-color: #00e6e6;
        color: #1a1a33;
    }
    /* AfterLounge Modal Styles */
    body.theme-afterlounge #discord-chat-modal-content {
        background-color: rgba(20, 20, 40, 0.95); /* Darker, more opaque */
        border: 2px solid #00e6e6;
        box-shadow: 0 0 25px rgba(0, 230, 230, 0.6);
    }
    body.theme-afterlounge .discord-modal-close { color: #00e6e6; }
    body.theme-afterlounge .discord-modal-close:hover { color: #ffffff; }


        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #0c0c1a;
            color: #cccccc;
            line-height: 1.5;
            overflow-x: hidden;
            font-size: 16px;
            transition: background-color 0.5s ease, color 0.5s ease, background-image 0.5s ease;
        }
        header {
            background-color: #1a1a33;
            color: #00e6e6;
            padding: 20px;
            text-align: center;
            border-bottom: 4px solid #005b5b;
            transition: background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
        }
        header h2 {
            margin-top: 0;
            font-size: 2em;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #00a3a3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: block;
            margin-bottom: 0;
            transition: color 0.5s ease;
        }
        header p {
            font-size: 1em;
            color: #999999;
            margin-top: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: block;
            margin-bottom: 0;
            transition: color 0.5s ease;
        }
        #controls-bar {
            background-color: #1f1f3d;
            padding: 8px 20px;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            border-bottom: 1px solid #005b5b;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        #controls-bar .theme-switcher {
             margin: 0;
             padding: 0;
             border: none;
             color: #cccccc;
             display: flex;
             align-items: center;
             gap: 8px;
             transition: color 0.5s ease;
        }
        #controls-bar .theme-switcher label {
            margin-right: 0;
            font-size: 0.85em;
            text-transform: uppercase;
            white-space: nowrap;
        }
        #controls-bar .theme-switcher select {
            font-size: 0.85em;
            padding: 4px 20px 4px 8px;
             background-image: linear-gradient(45deg, transparent 50%, currentColor 50%), linear-gradient(135deg, currentColor 50%, transparent 50%);
             background-position: calc(100% - 8px) center, calc(100% - 4px) center;
             background-size: 4px 4px, 4px 4px;
             background-repeat: no-repeat;
             appearance: none;
             -webkit-appearance: none;
             -moz-appearance: none;
             cursor: pointer;
             border-radius: 4px;
             border: 1px solid #00a3a3;
             background-color: #1a1a33;
             color: #00e6e6;
             transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        #controls-bar .theme-switcher select option {
             background-color: #1a1a33;
             color: #00e6e6;
        }
        .irc-chat-button { /* Renamed to .discord-chat-button in HTML, but reusing class for now, or can rename */
            font-size: 0.85em;
            padding: 4px 12px;
            text-decoration: none;
            text-transform: uppercase;
            white-space: nowrap;
            cursor: pointer;
            border-radius: 4px;
            border: 1px solid #00a3a3;
            background-color: #1a1a33;
            color: #00e6e6;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
            display: inline-block;
        }
        .irc-chat-button:hover { /* Will be .discord-chat-button:hover */
            background-color: #00e6e6;
            color: #1a1a33;
        }

        main { /* ... existing styles ... */ }
        section:not(#discord-chat-modal-content) { /* Exclude modal from general section styling if it uses <section> */
            background-color: #1a1a33;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #005b5b;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.3);
            box-sizing: border-box;
            transition: background-color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease, color 0.5s ease, background 0.5s ease;
        }
        /* ... other existing styles ... */

        /* ----- MODAL STYLES ----- */
        .discord-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.75); /* Darker overlay */
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 3000; /* Higher than participate popup */
            padding: 20px;
            box-sizing: border-box;
        }
        #discord-chat-modal-content { /* ID for the modal content box */
            position: relative; /* For close button positioning */
            background-color: #1a1a33; /* Default theme */
            padding: 25px;
            border: 2px solid #00a3a3; /* Default theme */
            border-radius: 8px;
            box-shadow: 0 0 25px rgba(0, 163, 163, 0.5); /* Default theme */
            color: #cccccc;
            width: auto; /* Auto width based on content */
            max-width: 90%; /* Max width on small screens */
            max-height: 90vh; /* Max height */
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Prevent content overflow issues before iframe loads */
        }
        #discord-chat-modal-content h2 { /* Style for modal title */
            color: #00a3a3; /* Default theme */
            border-bottom: 2px solid #005b5b; /* Default theme */
            padding-bottom: 8px;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.6em;
            text-align: center;
        }
        .discord-modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2em;
            font-weight: bold;
            color: #00a3a3; /* Default theme */
            cursor: pointer;
            line-height: 1;
        }
        .discord-modal-close:hover {
            color: #00e6e6; /* Default theme */
        }
        .discord-widget-container {
            width: 100%; /* Container takes available width */
            /* min-width: 300px; Set a min-width if Discord widget needs it */
            /* max-width: 400px; Set a max-width if desired */
            height: 60vh; /* Adjust as desired, make it responsive */
            min-height: 400px; /* Minimum sensible height */
            overflow: hidden; /* To contain the iframe nicely */
        }
        .discord-widget-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        /* ----- END MODAL STYLES ----- */


        body.theme-noire #discord-chat-modal-content { background-color: #1c1c1c; border-color: #888; box-shadow: 0 0 25px rgba(136,136,136,0.5); }
        body.theme-noire #discord-chat-modal-content h2 { color: #fff; border-bottom-color: #555; }
        body.theme-noire .discord-modal-close { color: #888; }
        body.theme-noire .discord-modal-close:hover { color: #eee; }
        body.theme-noire .irc-chat-button { background-color: #333; color: #eee; border-color: #888; }
        body.theme-noire .irc-chat-button:hover { background-color: #eee; color: #333; }

        body.theme-slade #discord-chat-modal-content { background-color: #2c2c2c; border-color: #ff9900; box-shadow: 0 0 25px rgba(255,153,0,0.5); }
        body.theme-slade #discord-chat-modal-content h2 { color: #ff9900; border-bottom-color: #ff6600; }
        body.theme-slade .discord-modal-close { color: #ff9900; }
        body.theme-slade .discord-modal-close:hover { color: #ffcc00; }
        body.theme-slade .irc-chat-button { background-color: #444; color: #ff9900; border-color: #ff6600; }
        body.theme-slade .irc-chat-button:hover { background-color: #ff9900; color: #444; }

        body.theme-mr-johnson #discord-chat-modal-content { background-color: rgba(42,0,85,0.95); border-color: #00ff00; box-shadow: 0 0 25px rgba(0,255,0,0.5); }
        body.theme-mr-johnson #discord-chat-modal-content h2 { color: #00ff00; border-bottom-color: #008000; }
        body.theme-mr-johnson .discord-modal-close { color: #00ff00; }
        body.theme-mr-johnson .discord-modal-close:hover { color: #32cd32; }
        body.theme-mr-johnson .irc-chat-button { background-color: #3a0066; color: #00ff00; border-color: #008000; }
        body.theme-mr-johnson .irc-chat-button:hover { background-color: #00ff00; color: #3a0066; }

        body.theme-albright #discord-chat-modal-content { background-color: rgba(74,57,46,0.95); border-color: #ffc107; box-shadow: 0 0 25px rgba(255,193,7,0.6); }
        body.theme-albright #discord-chat-modal-content h2 { color: #ffc107; border-bottom-color: #b46a00; }
        body.theme-albright .discord-modal-close { color: #ffc107; }
        body.theme-albright .discord-modal-close:hover { color: #ffd700; }
        body.theme-albright .irc-chat-button { background-color: #6f4f2d; color: #ffc107; border-color: #b46a00; }
        body.theme-albright .irc-chat-button:hover { background-color: #ffc107; color: #6f4f2d; }

        body.theme-riggin #discord-chat-modal-content { background-color: #1a1a1a; border-color: #FFA500; box-shadow: 0 0 25px rgba(255,165,0,0.6); }
        body.theme-riggin #discord-chat-modal-content h2 { color: #FFA500; border-bottom-color: #FF8C00; }
        body.theme-riggin .discord-modal-close { color: #FFA500; }
        body.theme-riggin .discord-modal-close:hover { color: #FFD700; }
        body.theme-riggin .irc-chat-button { background-color: #333333; color: #FFA500; border-color: #FF8C00; }
        body.theme-riggin .irc-chat-button:hover { background-color: #FFA500; color: #333333; }


        /* ... (rest of your existing CSS: footer, media queries etc.) ... */
        footer { /* ... */ }
        /* ... */
        @media (max-width: 768px) {
            #discord-chat-modal-content {
                max-width: 95%;
                padding: 15px;
            }
            #discord-chat-modal-content h2 {
                font-size: 1.4em;
            }
            .discord-widget-container {
                height: 70vh; /* More height on smaller screens */
            }
            /* ... other media query adjustments ... */
        }
        @media (max-width: 480px) {
            .irc-chat-button, #controls-bar .theme-switcher label {
                font-size: 0.7em; /* Ensure button text is also smaller if theme switcher label is */
            }
            .irc-chat-button {
                padding: 3px 6px;
            }
            #discord-chat-modal-content {
                padding: 10px;
            }
             #discord-chat-modal-content h2 {
                font-size: 1.2em;
                margin-bottom: 10px;
            }
            .discord-modal-close {
                font-size: 1.8em;
                top: 5px;
                right: 10px;
            }
            /* ... other media query adjustments ... */
        }

    </style>
</head>
<body class="theme-albright">
    <button id="participate-button">Participate</button>
    <div id="popup-overlay">
        <div id="popup-content">
            <p>You've come here in search of release, huh?</p>
            <button id="popup-yes-button">Yes</button>
        </div>
    </div>

    <div class="discord-modal-overlay" id="discordModal">
        <div id="discord-chat-modal-content">
            <span class="discord-modal-close" id="discordModalClose">&times;</span>
            <h2>WAPA Live Chat (Discord)</h2>
           <iframe src="https://discord.com/widget?id=1224858781863907419&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
        </div>
    </div>

    <header>
        <h2>// WILLOW ARMS PUBLIC ACCESS \\</h2>
        <p>Indie Online Broadcasts</p>
    </header>

    <div id="controls-bar">
         <button type="button" class="irc-chat-button" id="discordChatBtn">Live Chat</button> <div class="theme-switcher">
             <label for="theme-select">Theme:</label>
             <select id="theme-select">
                 <option value="afterlounge">AfterLounge</option>
                 <option value="noire">Noire</option>
                 <option value="slade">Slade</option>
                 <option value="mr-johnson">Mr. Johnson</option>
                 <option value="albright">Albright</option>
                 <option value="riggin">Riggin</option>
             </select>
         </div>
    </div>
    <main>
        <section id="livestream">
            <h2>[tune in]</h2>
            <div class="video-container">
                 <iframe src="https://player.kick.com/willowarmspublicaccess" height="720" width="1280" frameborder="0" scrolling="no" allowfullscreen="true"></iframe>
            </div>
        </section>

        <section id="shows">
            <h2>[lineup]</h2>
            <p>Explore the programming lineup on Willow Arms Public Access:</p>
            <div class="show">
                <h3>:: The Bonfire Podcast :: Live Discussions & Rambling</h3>
                <p>Tune into The Bonfire Podcast live stream or catch reruns. It's an unfiltered discussion show covering anything and everything, like a digital gathering around a late-night fire. Expect tangents, strong opinions, and maybe a little bit of chaos. It's our main talk show broadcast.</p>
            </div>
            <div class="show">
                <h3>:: DogPound :: Recovered Transmissions</h3>
                <p>The city never sleeps, and neither do the cameras. DogPound presents a stark look at life through recovered dash and body camera footage, allegedly from the Willow Arms municipal archives. From daylight disturbances to after-hours altercations, experience the raw, unfiltered reality of the streets. What you're about to see is not a drill. Only on WAPA.</p>
            </div>
            <div class="show">
                <h3>:: [vibe]rations :: Offbeat Music Videos</h3>
                <p>[vibe]rations brings you a curated selection of unique and offbeat music videos. From lo-fi visuals to experimental sounds, this show is like finding a hidden signal of digital art and music. Great for discovering new vibes on our internet TV channel.</p>
            </div>
            <div class="show">
                <h3>:: POV: mom & dad are fighting again :: Experimental Broadcast</h3>
                <p>Experience 'POV: mom & dad are fighting again,' one of our most unique online shows. It's an experimental broadcast blending old TV signals, nostalgic aesthetics, and background ambiance. A lo-fi, dreamlike journey into the uncomfortable familiar.</p>
            </div>
            <div class="show">
                <h3>:: [iinnermission] :: Lo-fi Live Stream</h3>
                <p>Need to chill? [iinnermission] is our lo-fi live stream designed for focus, relaxation, or just background ambiance. Calming visuals and sounds from the Willow Arms universe. A perfect stream for downtime on the internet.</p>
            </div>
        </section>

         <section id="merch">
            <h2>[MERCH]</h2>
            <div class="iframe-container">
                <iframe src="https://wapashop.printify.me">
                    <p>Your browser does not support iframes. Please visit the <a href="https://wapashop.printify.me">Merch Store</a> directly.</p>
                </iframe>
            </div>
        </section>

        <section id="tiktok-feed">
            <h2>[LATEST TIKTOKS]</h2>
             <div class="iframe-container">
                <div class='sk-tiktok-feed' data-embed-id='25553721'></div><script src='https://widgets.sociablekit.com/tiktok-feed/widget.js' defer></script>
             </div>
        </section>

        <section id="links-embed">
            <h2>[links]</h2>
            <div class="iframe-container">
                <iframe src="https://taplink.cc/wapaccess">
                    <p>Your browser does not support iframes. Please visit our <a href="https://taplink.cc/wapaccess">Links Page</a> directly.</p>
                </iframe>
            </div>
        </section>
        
        <section id="soundcloud-vibes">
            <h2>[BACKGROUND VIBES]</h2>
           <iframe id="soundcloud-widget" width="100%" height="600" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/2016641082&color=%230d0c0c&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe><div style="font-size: 10px; color: #242424;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/djsl34z" title="[wapa]" target="_blank" style="color: #242424; text-decoration: none;">[wapa]</a> · <a href="https://soundcloud.com/djsl34z/sets/willow-arms-public-broadcast-midwestern-ost" title="Willow Arms Public Broadcast Midwestern OST" target="_blank" style="color: #242424; text-decoration: none;">Willow Arms Public Broadcast Midwestern OST</a></div>
        </section>
    </main>

    <footer>
        <p>&copy; <script>document.write(new Date().getFullYear())</script> Willow Arms Public Access. <a href="staffpage.html" class="staff-link">Meet The Staff</a> <br> Your source for offbeat internet TV.</p>
    </footer>

    <script>
        // Existing scripts for theme switcher, participate button, soundcloud...
        const participateButton = document.getElementById('participate-button');
        const popupOverlay = document.getElementById('popup-overlay');
        const popupYesButton = document.getElementById('popup-yes-button');
        let buttonX, buttonY, dx, dy;
        const defaultButtonSize = 60;
        const speed = 3;
        let animationInterval = null;

        function setTheme(themeName) {
            document.body.className = document.body.className.replace(/theme-\S+/g, '').trim();
            document.body.classList.add('theme-' + themeName);
            localStorage.setItem('wapTheme', themeName);
            const themeSelect = document.getElementById('theme-select');
            if (themeSelect) {
                 themeSelect.value = themeName;
            }
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('wapTheme') || 'albright';
            setTheme(savedTheme);
        }

        function initializeButton() { /* ... existing code ... */ }
        function updateButtonPosition() { /* ... existing code ... */ }

        // ----- NEW SCRIPT FOR DISCORD MODAL -----
        const discordModal = document.getElementById('discordModal');
        const discordChatBtn = document.getElementById('discordChatBtn');
        const discordModalClose = document.getElementById('discordModalClose');

        if (discordChatBtn) {
            discordChatBtn.onclick = function() {
                if (discordModal) discordModal.style.display = "flex";
            }
        }
        if (discordModalClose) {
            discordModalClose.onclick = function() {
                if (discordModal) discordModal.style.display = "none";
            }
        }
        // Close modal if user clicks outside of the modal content
        if (discordModal) {
            discordModal.onclick = function(event) {
                if (event.target == discordModal) {
                    discordModal.style.display = "none";
                }
            }
        }
        // ----- END NEW SCRIPT FOR DISCORD MODAL -----


        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            const themeSelect = document.getElementById('theme-select');
            if (themeSelect) { /* ... existing code ... */ }
            if (document.getElementById('participate-button') && /*...*/) { /* ... existing code ... */ }
            const soundcloud_iframe = document.getElementById('soundcloud-widget');
            if (soundcloud_iframe && typeof SC !== 'undefined' && SC.Widget) { /* ... existing code ... */ }
        });

        window.addEventListener('resize', () => { /* ... existing code ... */ });
    </script>
</body>
</html>